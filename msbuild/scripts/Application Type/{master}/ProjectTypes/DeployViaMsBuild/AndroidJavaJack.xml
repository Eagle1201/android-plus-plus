<?xml version="1.0" encoding="utf-8"?>
<ProjectSchemaDefinitions xmlns="http://schemas.microsoft.com/build/2009/properties" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:sys="clr-namespace:System;assembly=mscorlib">

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    -->

  <Rule
    Name="AndroidJavaJack"
    PageTemplate="tool"
    DisplayName="Android Java (Jack) Tool"
    Order="200">

    <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    -->
    
    <Rule.DataSource>
      <DataSource Persistence="ProjectFile" ItemType="AndroidJavaJack" />
    </Rule.DataSource>

    <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    -->

    <Rule.Categories>
      <Category Name="General" DisplayName="General" />
      <Category Name="Output Files" DisplayName="Output Files" />
      <Category Name="Advanced" DisplayName="Advanced" />
      <Category Name="Command Line" DisplayName="Command Line" Subtype="CommandLine" />
    </Rule.Categories>

    <!--
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    -->

    <!--
      ClassPaths
    -->

    <StringListProperty
      Subtype="file"
      Name="ClassPaths"
      DisplayName="Class Path(s)"
      Description="Specify where to find user class files, and (optionally) annotation processors and source files. Can be directories, JAR archives, or ZIP archives."
      Category="General"
      Switch="--classpath"
      Separator=" "
      CommandLineValueSeparator=";"
    />
    
    <!--
      ConfigJarJar
    -->
    
    <StringListProperty
      Subtype="file"
      Name="ConfigJarJar"
      DisplayName="JarJar Rules File(s)"
      Description="Use JarJar rules file(s) (default: none)."
      Category="General"
      Switch="--config-proguard"
      Separator=" "
    />

    <!--
      ConfigProGuard
    -->

    <StringListProperty
      Subtype="file"
      Name="ConfigProGuard"
      DisplayName="ProGuard Configuration File(s)"
      Description="Use ProGuard flags file(s) (default: none)."
      Category="General"
      Switch="--config-proguard"
      Separator=" "
    />

    <!--
      ImportFile
    -->

    <StringListProperty
      Subtype="file"
      Name="ImportFile"
      DisplayName="Import File(s)"
      Description="Import the given file(s) into the output."
      Category="General"
      Switch="--import"
      Separator=" "
    />

    <!--
      ImportMetaDir
    -->

    <StringListProperty
      Subtype="folder"
      Name="ImportMetaDir"
      DisplayName="Import Meta-file(s) Directory"
      Description="Import the given directories into the output as meta-files."
      Category="General"
      Switch="--import-meta"
      Separator=" "
    />

    <!--
      ImportResourceDir
    -->

    <StringListProperty
      Subtype="folder"
      Name="ImportResourceDir"
      DisplayName="Import Resource(s) Directory"
      Description="Import the given directories into the output as resource files."
      Category="General"
      Switch="--import-resource"
      Separator=" "
    />

    <!--
      IncrementalFolder
    -->

    <StringListProperty
      Subtype="folder"
      Name="IncrementalFolder"
      DisplayName="Incremental Build Directory"
      Description="Directory used for incremental build data."
      Category="Advanced"
      Switch="--incremental-folder"
      Separator=" "
    />

    <!--
      MultiDexOutput
    -->

    <EnumProperty
      Name="MultiDexOutput"
      DisplayName="Multi-dex Output"
      Description="Specifies whether to split code into multiple dex files."
      Category="Advanced">

      <EnumValue
        Name="None"
        DisplayName="None"
        Switch="--multi-dex none"
      />

      <EnumValue
        Name="Native"
        DisplayName="Native"
        Switch="--multi-dex native"
      />

      <EnumValue
        Name="Legacy"
        DisplayName="Legacy"
        Switch="--multi-dex legacy"
      />

    </EnumProperty>

    <!--
      OutputDexDir
    -->

    <StringListProperty
      Subtype="folder"
      Name="OutputDexDir"
      DisplayName="Output DEX Directory"
      Description="Output .dex files and resources to the directory."
      Category="General"
      Switch="--output-dex"
      Separator=" "
    />

    <!--
      OutputJackFile
    -->

    <StringListProperty
      Subtype="file"
      Name="OutputJackFile"
      DisplayName="Output JACK File"
      Description="Output .jack library file."
      Category="General"
      Switch="--output-jack"
      Separator=" "
    />

    <!--
      GenerateDebuggingInformation
    -->

    <BoolProperty
      Name="GenerateDebuggingInformation"
      DisplayName="Generate Debugging Information"
      Description="Generate all debugging information, including local variables. By default, only line number and source file information is generated."
      Category="General"
      Switch="-g"
    />

    <!--
      Verbose
    -->

    <BoolProperty
      Name="Verbose"
      DisplayName="Verbose"
      Category="General"
      Switch="--verbose"
      IncludeInCommandLine="false"
    />

    <!--
      AdditionalOptions
    -->

    <StringProperty
      Name="AdditionalOptions"
      DisplayName="Additional Options"
      Description="Additional Options"
      Category="Command Line"
      F1Keyword="vc.project.AdditionalOptionsPage"
    />

    <!--
      MultiProcessorCompilation
    -->

    <BoolProperty
      Name="MultiProcessorCompilation"
      DisplayName="Multi-processor Compilation"
      Description="Multi-processor Compilation"
      Category="General"
      IncludeInCommandLine="false">

      <Argument Property="ProcessorNumber" IsRequired="false" />

    </BoolProperty>

    <!--
      ProcessorNumber (Hidden)
    -->

    <IntProperty
      Name="ProcessorNumber"
      DisplayName="Number of processors"
      Description="Number of processors."
      Category="General"
      IncludeInCommandLine="false"
      Visible="false"
    />

    <!--
      TrackerLogDirectory
    -->

    <StringProperty
      Subtype="folder"
      Name="TrackerLogDirectory"
      DisplayName="Tracker Log Directory"
      Description="Tracker Log Directory."
      Category="General"
      IncludeInCommandLine="false"
      Visible="false"
    />

    <!--
      OutputCommandLine
    -->

    <BoolProperty
      Name="OutputCommandLine"
      DisplayName="Output Command Line"
      Category="General"
      IncludeInCommandLine="false"
    />

    <!--
      BuildingInIDE
    -->

    <BoolProperty
      Name="BuildingInIDE"
      Visible="false"
    />

    <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    -->
    
    <DynamicEnumProperty
     Name="AndroidJavaJackBeforeTargets"
     Category="General"
     EnumProvider="Targets"
     IncludeInCommandLine="False">
      <DynamicEnumProperty.DisplayName>
        <sys:String>Execute Before</sys:String>
      </DynamicEnumProperty.DisplayName>
      <DynamicEnumProperty.Description>
        <sys:String>Specifies the targets for the build customization to run before.</sys:String>
      </DynamicEnumProperty.Description>
      <DynamicEnumProperty.ProviderSettings>
        <NameValuePair
          Name="Exclude"
          Value="^AndroidJavaJackBeforeTargets|^Compute" />
      </DynamicEnumProperty.ProviderSettings>
      <DynamicEnumProperty.DataSource>
        <DataSource
          Persistence="ProjectFile"
          ItemType=""
          HasConfigurationCondition="true" />
      </DynamicEnumProperty.DataSource>
    </DynamicEnumProperty>
    
    <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    -->
    
    <DynamicEnumProperty
      Name="AndroidJavaJackAfterTargets"
      Category="General"
      EnumProvider="Targets"
      IncludeInCommandLine="False">
      <DynamicEnumProperty.DisplayName>
        <sys:String>Execute After</sys:String>
      </DynamicEnumProperty.DisplayName>
      <DynamicEnumProperty.Description>
        <sys:String>Specifies the targets for the build customization to run after.</sys:String>
      </DynamicEnumProperty.Description>
      <DynamicEnumProperty.ProviderSettings>
        <NameValuePair
          Name="Exclude"
          Value="^AndroidJavaJackAfterTargets|^Compute" />
      </DynamicEnumProperty.ProviderSettings>
      <DynamicEnumProperty.DataSource>
        <DataSource
          Persistence="ProjectFile"
          ItemType=""
          HasConfigurationCondition="true" />
      </DynamicEnumProperty.DataSource>
    </DynamicEnumProperty>
    
    <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    -->

  </Rule>

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

  <ItemType Name="AndroidJavaJack" DisplayName="Android Java (Jack) Tool" />

  <FileExtension Name="*.java" ContentType="AndroidJavaJack" />

  <FileExtension Name="*.jack" ContentType="AndroidJavaJack" />

  <ContentType Name="AndroidJavaJack" DisplayName="Android Java (Jack) Tool" ItemType="AndroidJavaJack" />

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

</ProjectSchemaDefinitions>
