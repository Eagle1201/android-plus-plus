<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  *This file is automatically generated. Local changes risk being overwritten by the export process.*

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->

<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  
  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

  <!--
    Copied and modified from Microsoft.CppBuild.targets to support .so (shared library) file types.
  -->
  
  <Target 
    Name="ComputeReferenceLinkInputs"
    DependsOnTargets="ResolvedLinkLib;ComputeResolveLinkObj"
    Returns="@(ProjectReferenceToLink)"
    Condition="@(ProjectReference) != ''">

    <PropertyGroup>
      <_REFERENCE_DEBUG>true</_REFERENCE_DEBUG>
    </PropertyGroup>
    
    <ItemGroup Condition="'@(_ResolvedNativeProjectReferencePaths)' != ''" >

      <ProjectReferenceToLink 
        Condition=" '%(_ResolvedNativeProjectReferencePaths.FileType)'=='lib'
          and  '%(_ResolvedNativeProjectReferencePaths.LinkLibraryDependencies)'!='false'
          and ('%(_ResolvedNativeProjectReferencePaths.UseLibraryDependencyInputs)'!='true' 
          or '%(_ResolvedNativeProjectReferencePaths.ProjectType)'!='StaticLibrary')"
        Include="@(_ResolvedNativeProjectReferencePaths)"
      />

      <ProjectReferenceToLink 
        Condition=" '%(_ResolvedNativeProjectReferencePaths.FileType)'=='so'"
        Include="@(_ResolvedNativeProjectReferencePaths)"
      />

      <ProjectReferenceToLink 
        Condition="'%(_ResolvedNativeProjectReferencePaths.FileType)'=='obj'
          and '%(_ResolvedNativeProjectReferencePaths.LinkLibraryDependencies)'!='false'
          and '%(_ResolvedNativeProjectReferencePaths.UseLibraryDependencyInputs)'=='true'
          and '%(_ResolvedNativeProjectReferencePaths.ProjectType)'=='StaticLibrary'"
        Include="@(_ResolvedNativeProjectReferencePaths)"
      />

      <ProjectReferenceToLink>
        <CopyLocal Condition="'%(ProjectReferenceToLink.CopyLocal)'==''">%(ProjectReferenceToLink.Private)</CopyLocal>
      </ProjectReferenceToLink>

      <Link Condition="'@(ProjectReferenceToLink)'!=''" Include="@(ProjectReferenceToLink->ClearMetadata()->Distinct())" />

    </ItemGroup>

    <VCMessage Condition="'%(ProjectReferenceToLink.ProjectType)' == 'DynamicLibrary' and '$(WindowsAppContainer)' == 'true' and '%(ProjectReferenceToLink.WindowsAppContainer)' != 'true'" Code="MSB8019" Type="Warning" Arguments="@(ProjectReferenceToLink);%(ProjectReferenceToLink.MSBuildSourceProjectFile)"/>

    <Message Condition="'$(_REFERENCE_DEBUG)'=='true'" Text="ProjectReferenceToLink=@(ProjectReferenceToLink)" Importance="high" />

  </Target>
  
  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  
  <!--
    Copied and modified from Microsoft.CppBuild.targets to support .a (static library) file types.
  -->
  
  <Target 
    Name="ComputeReferenceLibInputs"
    DependsOnTargets="ResolvedLinkLib"
    Returns="@(ProjectReferenceToLink)"
    Condition="@(ProjectReference) != ''">

    <PropertyGroup>
      <_REFERENCE_DEBUG>true</_REFERENCE_DEBUG>
    </PropertyGroup>

    <ItemGroup Condition="'@(_ResolvedNativeProjectReferencePaths)' != ''" >

      <ProjectReferenceToLink 
        Condition=" '%(_ResolvedNativeProjectReferencePaths.FileType)'=='lib'
          and  '%(_ResolvedNativeProjectReferencePaths.LinkLibraryDependencies)'!='false'
          and ('%(_ResolvedNativeProjectReferencePaths.UseLibraryDependencyInputs)'=='false' 
            or '%(_ResolvedNativeProjectReferencePaths.ProjectType)'!='StaticLibrary')"
        Include="@(_ResolvedNativeProjectReferencePaths)"
      />

      <ProjectReferenceToLink 
        Condition=" '%(_ResolvedNativeProjectReferencePaths.FileType)'=='a'
          and  '%(_ResolvedNativeProjectReferencePaths.LinkLibraryDependencies)'!='false'
          and ('%(_ResolvedNativeProjectReferencePaths.UseLibraryDependencyInputs)'=='false' 
            or '%(_ResolvedNativeProjectReferencePaths.ProjectType)'!='StaticLibrary')"
        Include="@(_ResolvedNativeProjectReferencePaths)"
      />

      <ProjectReferenceToLink 
        Condition="'%(_ResolvedNativeProjectReferencePaths.FileType)'=='obj'
          and '%(_ResolvedNativeProjectReferencePaths.LinkLibraryDependencies)'!='false'
          and '%(_ResolvedNativeProjectReferencePaths.UseLibraryDependencyInputs)'=='true'
          and '%(_ResolvedNativeProjectReferencePaths.ProjectType)'=='StaticLibrary'"
        Include="@(_ResolvedNativeProjectReferencePaths)"
      />

      <ProjectReferenceToLink>
        <CopyLocal Condition="'%(ProjectReferenceToLink.CopyLocal)'==''">%(ProjectReferenceToLink.Private)</CopyLocal>
      </ProjectReferenceToLink>

      <Lib Condition="'@(ProjectReferenceToLink)'!=''" Include="@(ProjectReferenceToLink->ClearMetadata()->Distinct())" />

    </ItemGroup>

    <Message Condition="'$(_REFERENCE_DEBUG)'=='true'" Text="ProjectReferenceToLink=@(ProjectReferenceToLink)" Importance="high" />

  </Target>
  
  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  
  <Target 
    Name="GetProjectNativeSharedLibraries"
    Returns="@(_ProjectNativeSharedLibrariesDistinct)"
    DependsOnTargets="ResolvedLinkLib;ComputeResolveLinkObj">
    <ItemGroup>
      <_ProjectNativeSharedLibraries 
        Include="
          @(Link->Metadata('OutputFile'));
          @(LinkOutputFiles->Metadata('FullPath'));
          $(ProjectDir)lib\$(TargetPlatformArchitectureEabi)\*.so;
          $(ProjectDir)libs\$(TargetPlatformArchitectureEabi)\*.so"
      />
      <!-- Filter any potential duplicates -->
      <_ProjectNativeSharedLibrariesDistinct
        Include="@(_ProjectNativeSharedLibraries->Distinct())"
      />
    </ItemGroup>
  </Target>

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  
  <Target
    Name="GetDependencyNativeSharedLibraries"
    Returns="@(_DependencyNativeSharedLibrariesDistinct)"
    DependsOnTargets="">
    <MSBuild
      Projects="@(ProjectReference)"
      Targets="GetProjectNativeSharedLibraries"
      BuildInParallel="$(BuildInParallel)"
      Properties="Platform=$(Platform);Configuration=$(Configuration)"
      RebaseOutputs="true"
      UseResultsCache="false">
      <Output TaskParameter="TargetOutputs" ItemName="_DependencyNativeSharedLibraries"/>
    </MSBuild>
    <!-- Filter any potential duplicates -->
    <ItemGroup>
      <_DependencyNativeSharedLibrariesDistinct Include="@(_DependencyNativeSharedLibraries->Distinct())" />
    </ItemGroup>
  </Target>
  
  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

  <!--
    Stub targets used in BuildCustomizations scripts that are called dynamically via an MSBuild task (thus must be defined in all projects)
  -->
  
  <Target Name="GetProjectAndroidManifests" />

  <Target Name="GetDependencyAndroidManifests" />

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

</Project>