<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  Based on Microsoft.CppBuild.targets

  *This file is automatically generated. Local changes risk being overwritten by the export process.*

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->

<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

  <!-- 
    Property pages 
  -->

  <ItemGroup>

    <!-- Property pages that always apply -->
    <PropertyPageSchema 
      Include="
        $(VCTargetsPath)\Application Type\{master}\PlatformProps\custom_project_items_schema.xml;
        $(VCTargetsPath)$(LangID)\debugger_*.xml;
        $(VCTargetsPath)$(LangID)\build_events.xml;
        $(VCTargetsPath)$(LangID)\custom_build_tool.xml;
        "
      Exclude="
        $(VCTargetsPath)$(LangID)\debugger_smartdevice_native.xml;
    "/>

    <!-- 
      Make sure the following debugger schemas are explicitly included, to allow CPS to search for them
      in the alternative locations. To avoid duplicate schemas, we don't include them
      if they already exist in $(VCTargetsPath)$(LangID)\debugger_*.xml 
    -->

    <PropertyPageSchema Condition="!Exists('$(VCTargetsPath)$(LangID)\debugger_general.xml')" Include="$(VCTargetsPath)$(LangID)\debugger_general.xml" />
    <PropertyPageSchema Condition="!Exists('$(VCTargetsPath)$(LangID)\debugger_local_windows.xml')" Include="$(VCTargetsPath)$(LangID)\debugger_local_windows.xml" />
    <PropertyPageSchema Condition="!Exists('$(VCTargetsPath)$(LangID)\debugger_mpi_cluster.xml')" Include="$(VCTargetsPath)$(LangID)\debugger_mpi_cluster.xml" />
    <PropertyPageSchema Condition="!Exists('$(VCTargetsPath)$(LangID)\debugger_remote_windows.xml')" Include="$(VCTargetsPath)$(LangID)\debugger_remote_windows.xml" />
    <PropertyPageSchema Condition="!Exists('$(VCTargetsPath)$(LangID)\debugger_web_browser.xml')" Include="$(VCTargetsPath)$(LangID)\debugger_web_browser.xml" />
    <PropertyPageSchema Condition="!Exists('$(VCTargetsPath)$(LangID)\debugger_web_service.xml')" Include="$(VCTargetsPath)$(LangID)\debugger_web_service.xml" />

    <!-- Property sheet specific property pages -->
    <PropertyPageSchema Include="$(VCTargetsPath)$(LangID)\usermacros.xml">
      <Context>PropertySheet</Context>
    </PropertyPageSchema>

    <!-- Switch view between project property based directories and environment variables -->
    <PropertyPageSchema 
      Include="$(VCTargetsPath)\Application Type\{master}\PlatformProps\native_directories.xml"
    />

    <PropertyPageSchema
      Condition="('$(ConfigurationType)' == 'Application' or '$(ConfigurationType)' == 'Executable' or '$(ConfigurationType)' == 'DynamicLibrary')"
      Include="
        $(VCTargetsPath)\Application Type\{master}\PlatformProps\native_compile.xml;
        $(VCTargetsPath)\Application Type\{master}\PlatformProps\native_link.xml"
    />

    <PropertyPageSchema
      Condition="'$(ConfigurationType)' == 'StaticLibrary'"
      Include="
        $(VCTargetsPath)\Application Type\{master}\PlatformProps\native_compile.xml;
        $(VCTargetsPath)\Application Type\{master}\PlatformProps\native_lib.xml"
    />

    <PropertyPageSchema
      Condition="('$(ConfigurationType)' == 'DynamicLibrary' or '$(ConfigurationType)' == 'StaticLibrary')"
      Include="$(VCTargetsPath)\Application Type\{master}\ProjectTypes\DeployViaMsBuild\AndroidAar.xml"
    />

    <PropertyPageSchema
      Condition="'$(ConfigurationType)' == 'Application'"
      Include="$(VCTargetsPath)\Application Type\{master}\ProjectTypes\DeployViaMsBuild\AndroidApk.xml"
    />

    <!-- Non-Utility project property pages -->
    <PropertyPageSchema 
      Condition="'$(ConfigurationType)' != 'Utility'" 
      Include="$(VCTargetsPath)$(LangID)\custom_build_step.xml"
    />

  </ItemGroup>
  
  <!--
    Define the standard (general) rules for a project. This is still rather black magic to me though.
  -->

  <ItemGroup>
    <PropertyPageSchema Include="$(VCTargetsPath)\Application Type\{master}\PlatformProps\custom_general.xml">
      <Context>Project</Context>
    </PropertyPageSchema>
    <PropertyPageSchema Include="$(VCTargetsPath)\Application Type\{master}\PlatformProps\custom_general_appcontainerapplication.xml" Condition="'$(AppContainerApplication)' == 'true'">
       <Context>Project</Context>
    </PropertyPageSchema>
    <PropertyPageSchema Include="$(VCTargetsPath)\Application Type\{master}\PlatformProps\custom_general_ps.xml">
      <Context>PropertySheet</Context>
    </PropertyPageSchema>
    <PropertyPageSchema Include="$(VCTargetsPath)$(LangID)\folder.xml">
      <Context>File;BrowseObject</Context>
    </PropertyPageSchema>
  </ItemGroup>

  <!-- 
    Define which rules/targets should be associated with each configuration.
    - Linking is required for any projects supporting .so output (dynamic libraries and executables).
    - Assuming that all project types would like a 'Custom Build Step'.
  -->
  
  <ItemGroup Condition="('$(ConfigurationType)' == 'Application' or '$(ConfigurationType)' == 'Executable' or '$(ConfigurationType)' == 'DynamicLibrary')">
    <ProjectTools Include="Link"/>
  </ItemGroup>

  <ItemGroup Condition="'$(ConfigurationType)' == 'StaticLibrary'">
    <ProjectTools Include="Lib"/>
  </ItemGroup>

  <ItemGroup Condition="('$(ConfigurationType)' == 'StaticLibrary' or '$(ConfigurationType)' == 'DynamicLibrary')">
    <ProjectTools Include="AndroidAar"/>
  </ItemGroup>

  <ItemGroup Condition="('$(ConfigurationType)' == 'Application')">
    <ProjectTools Include="AndroidApk"/>
  </ItemGroup>
  
  <ItemGroup Condition="('$(ConfigurationType)' != 'Utility')">
    <ProjectTools Include="CustomBuildStep"/>
  </ItemGroup>

</Project>

<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->
