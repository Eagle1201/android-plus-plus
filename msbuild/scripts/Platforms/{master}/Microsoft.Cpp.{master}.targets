<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  Based on Microsoft.Cpp.Win32.targets

  *This file is automatically generated. Local changes risk being overwriten by the export process.*

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->

<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <Import Project="$(VCTargetsPath)\Platforms\{master}\ImportBefore\*.targets" Condition="Exists('$(VCTargetsPath)\Platforms\{master}\ImportBefore')" />

  <Import Project="$(VCTargetsPath)\Microsoft.CppCommon.targets" />

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

  <UsingTask TaskName="GccCompile" AssemblyFile="$(ANDROID_PLUS_PLUS)\msbuild\bin\{master-verbose}.MsBuild.CppTasks.dll" />

  <UsingTask TaskName="GccLink" AssemblyFile="$(ANDROID_PLUS_PLUS)\msbuild\bin\{master-verbose}.MsBuild.CppTasks.dll" />

  <UsingTask TaskName="GccLib" AssemblyFile="$(ANDROID_PLUS_PLUS)\msbuild\bin\{master-verbose}.MsBuild.CppTasks.dll" />

  <UsingTask TaskName="VCMessage" AssemblyName="Microsoft.Build.CppTasks.Common, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

  <PropertyGroup>

    <!--
      Enable incremental build by enable file tracking in tasks.
    -->

    <TrackFileAccess Condition="'$(TrackFileAccess)' == ''">true</TrackFileAccess>

    <!--
      Adjust target path to incorporate target architecture.
    -->

    <TargetPath>$([System.IO.Path]::Combine($(ProjectDir),$(OutDir)$(TargetPlatformArchitectureEabi)\$(TargetName)$(TargetExt)))</TargetPath>

  </PropertyGroup>

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

  <!-- 
    'ClCompile' based on: MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets 
  -->
  
  <Target Name="ClCompile" Condition="'@(ClCompile)' != ''" DependsOnTargets="SelectClCompile">

    <ItemGroup>
      <ClCompile>
        <CompileAs Condition="('%(ClCompile.CompileAs)' == 'Default' and '%(ClCompile.Extension)' == '.c')">CompileAsC</CompileAs>
        <CompileAs Condition="('%(ClCompile.CompileAs)' == 'Default' and '%(ClCompile.Extension)' == '.s')">CompileAsAsm</CompileAs>
        <CompileAs Condition="('%(ClCompile.CompileAs)' == 'Default' and '%(ClCompile.Extension)' == '.asm')">CompileAsAsm</CompileAs>
        <CompileAs Condition="('%(ClCompile.CompileAs)' == 'Default' and ('%(ClCompile.Extension)' != '.c' and '%(ClCompile.Extension)' != '.s' and '%(ClCompile.Extension)' != '.asm'))">CompileAsCpp</CompileAs>
      </ClCompile>
    </ItemGroup>

    <GccCompile
      Condition                          ="'%(ClCompile.ExcludedFromBuild)'!='true'"
      BuildingInIDE                      ="$(BuildingInsideVisualStudio)"
      Sources                            ="@(ClCompile)"

      ProcessorNumber                    ="%(ClCompile.ProcessorNumber)"
      MultiProcessorCompilation          ="%(ClCompile.MultiProcessorCompilation)"

      TrackerLogDirectory                ="%(ClCompile.TrackerLogDirectory)"
      TLogReadFiles                      ="@(CLTLogReadFiles)"
      TLogWriteFiles                     ="@(CLTLogWriteFiles)"
      TrackFileAccess                    ="$(TrackFileAccess)"
      MinimalRebuildFromTracking         ="%(ClCompile.MinimalRebuildFromTracking)"

      OutputCommandLine                  ="%(ClCompile.OutputCommandLine)"
      ToolPath                           ="$(PlatformToolsetCompileToolPath)"
      ToolExe                            ="$(PlatformToolsetCompileTool)"
      PropertiesFile                     ="$(VCTargetsPath)\Platforms\{master}\$(LangID)\gcc_compile.xml">

    </GccCompile>

  </Target>

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

  <!-- 
    'Link' based on: MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets 
  -->

  <Target 
    Name="Link" 
    Condition="'@(Link)' != ''">

    <PropertyGroup>
      <Link_MinimalRebuildFromTracking Condition="'@(Link->AnyHaveMetadataValue('MinimalRebuildFromTracking', 'false'))' == 'true'">false</Link_MinimalRebuildFromTracking>
      <Link_MinimalRebuildFromTracking Condition="'$(BuildType)' != 'Build' or '$(ForceRebuild)' == 'true'" >false</Link_MinimalRebuildFromTracking>
      <Link_MinimalRebuildFromTracking Condition="'$(Link_MinimalRebuildFromTracking)' == ''">true</Link_MinimalRebuildFromTracking>
    </PropertyGroup>

    <GccLink
      BuildingInIDE                  ="$(BuildingInsideVisualStudio)"
      Sources                        ="@(Link)"

      TrackerLogDirectory            ="%(Link.TrackerLogDirectory)"
      TLogReadFiles                  ="@(LinkTLogReadFiles)"
      TLogWriteFiles                 ="@(LinkTLogWriteFiles)"
      TrackFileAccess                ="$(TrackFileAccess)"
      MinimalRebuildFromTracking     ="$(Link_MinimalRebuildFromTracking)"

      OutputCommandLine              ="%(Link.OutputCommandLine)"
      ToolPath                       ="$(PlatformToolsetLinkToolPath)"
      ToolExe                        ="$(PlatformToolsetLinkTool)"
      PropertiesFile                 ="$(VCTargetsPath)\Platforms\{master}\$(LangID)\gcc_link.xml">

      <Output TaskParameter="OutputFiles" ItemName="LinkOutputFiles" />

      <Output TaskParameter="SkippedExecution" PropertyName="LinkSkippedExecution" />

    </GccLink>

    <Message Condition="'$(LinkSkippedExecution)' == 'false'" Text="$(MSBuildProjectFile) -&gt; @(LinkOutputFiles)" Importance="High" />

  </Target>

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

  <!-- 
    'Lib' based on: MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets 
  -->

  <Target 
    Name="Lib" 
    Condition="'@(Lib)' != ''">

    <ItemGroup>
      <Lib>
        <MinimalRebuildFromTracking Condition="'%(Lib.MinimalRebuildFromTracking)' == '' and '$(BuildType)' == 'Build' and '$(ForceRebuild)' != 'true'">true</MinimalRebuildFromTracking>
      </Lib>
    </ItemGroup>

    <GccLib
      BuildingInIDE                  ="$(BuildingInsideVisualStudio)"
      Sources                        ="@(Lib)"

      TrackerLogDirectory            ="%(Lib.TrackerLogDirectory)"
      TLogReadFiles                  ="@(LIBTLogReadFiles)"
      TLogWriteFiles                 ="@(LIBTLogWriteFiles)"
      TrackFileAccess                ="$(TrackFileAccess)"
      MinimalRebuildFromTracking     ="%(Lib.MinimalRebuildFromTracking)"

      OutputCommandLine              ="%(Lib.OutputCommandLine)"
      ToolPath                       ="$(PlatformToolsetLibToolPath)"
      ToolExe                        ="$(PlatformToolsetLibTool)"
      PropertiesFile                 ="$(VCTargetsPath)\Platforms\{master}\$(LangID)\gcc_lib.xml">

      <Output TaskParameter="OutputFiles" ItemName="LibOutputFiles" />

      <Output TaskParameter="SkippedExecution" PropertyName="LibSkippedExecution" />

    </GccLib>

    <Message Condition="'$(LibSkippedExecution)' == 'false'" Text="$(MSBuildProjectFile) -&gt; @(LibOutputFiles)" Importance="High" />

  </Target> 

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->

  <Import Project="$(VCTargetsPath)\Platforms\{master}\{master}.CppBuild.targets" />

  <Import Project="$(VCTargetsPath)\Platforms\{master}\ImportAfter\*.targets" Condition="Exists('$(VCTargetsPath)\Platforms\{master}\ImportAfter')" />

</Project>

<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->
